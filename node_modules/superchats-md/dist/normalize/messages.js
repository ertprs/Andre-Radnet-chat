'use strict';const a37_0x47d865=a37_0x338c;(function(_0x5b2939,_0x364ab6){const _0x4aa21a=a37_0x338c,_0xd45f1b=_0x5b2939();while(!![]){try{const _0x61342b=parseInt(_0x4aa21a(0x1cd))/0x1*(parseInt(_0x4aa21a(0x1ba))/0x2)+parseInt(_0x4aa21a(0x1da))/0x3+parseInt(_0x4aa21a(0x198))/0x4*(-parseInt(_0x4aa21a(0x1ad))/0x5)+parseInt(_0x4aa21a(0x1e5))/0x6+-parseInt(_0x4aa21a(0x1c5))/0x7*(parseInt(_0x4aa21a(0x17c))/0x8)+-parseInt(_0x4aa21a(0x1e6))/0x9*(-parseInt(_0x4aa21a(0x1a4))/0xa)+-parseInt(_0x4aa21a(0x1d2))/0xb*(parseInt(_0x4aa21a(0x18a))/0xc);if(_0x61342b===_0x364ab6)break;else _0xd45f1b['push'](_0xd45f1b['shift']());}catch(_0x48dd6c){_0xd45f1b['push'](_0xd45f1b['shift']());}}}(a37_0x1610,0x8684a));Object[a37_0x47d865(0x1d4)](exports,a37_0x47d865(0x1eb),{'value':!![]}),exports[a37_0x47d865(0x1d9)]=exports[a37_0x47d865(0x163)]=exports['generateWAMessageFromContent']=exports[a37_0x47d865(0x19c)]=exports[a37_0x47d865(0x18c)]=exports[a37_0x47d865(0x1c7)]=exports[a37_0x47d865(0x1a1)]=void 0x0;const boom_1=require(a37_0x47d865(0x16f)),fs_1=require('fs'),binary_1=require(a37_0x47d865(0x171)),mode_1=require(a37_0x47d865(0x183)),model_1=require(a37_0x47d865(0x1b6)),generics_1=require('./generics'),messages_media_1=require(a37_0x47d865(0x1bd)),MIMETYPE_MAP={'image':'image/jpeg','video':a37_0x47d865(0x179),'document':'application/pdf','audio':a37_0x47d865(0x1dd),'sticker':'image/webp','history':'application/x-protobuf','md-app-state':a37_0x47d865(0x1e1)},MessageTypeProto={'image':model_1[a37_0x47d865(0x19f)]['ImageMessage'],'video':model_1[a37_0x47d865(0x19f)]['VideoMessage'],'audio':model_1[a37_0x47d865(0x19f)]['AudioMessage'],'sticker':model_1[a37_0x47d865(0x19f)]['StickerMessage'],'document':model_1['WAProto'][a37_0x47d865(0x16b)]},ButtonType=binary_1['proto'][a37_0x47d865(0x1c9)][a37_0x47d865(0x164)],prepareWAMessageMedia=async(_0x22f5cd,_0x378fdc)=>{const _0x57b429=a37_0x47d865;var _0x413fca;let _0x5d4e23;for(const _0x578af3 of mode_1[_0x57b429(0x17e)]){_0x578af3 in _0x22f5cd&&(_0x5d4e23=_0x578af3);}const _0x598713={..._0x22f5cd,[_0x5d4e23]:undefined,'media':_0x22f5cd[_0x5d4e23]},_0x251310=typeof _0x598713['media']===_0x57b429(0x1d5)&&_0x57b429(0x1bb)in _0x598713[_0x57b429(0x1b2)]&&!!_0x598713[_0x57b429(0x1b2)]['url']&&!!_0x378fdc[_0x57b429(0x1d1)]&&_0x5d4e23+':'+_0x598713[_0x57b429(0x1b2)]['url'][_0x57b429(0x168)]();if(_0x251310){const _0x399bb4=_0x378fdc[_0x57b429(0x1d1)][_0x57b429(0x1a3)](_0x251310);if(_0x399bb4)return model_1['WAProto']['Message'][_0x57b429(0x1e4)](_0x399bb4);}_0x5d4e23===_0x57b429(0x1d3)&&!_0x598713['fileName']&&(_0x598713[_0x57b429(0x1b3)]=_0x57b429(0x19d));!_0x598713[_0x57b429(0x16c)]&&(_0x598713['mimetype']=MIMETYPE_MAP[_0x5d4e23]);const _0x281ac8=_0x5d4e23==='audio'&&typeof _0x598713['seconds']==='undefined',_0x388092=(_0x5d4e23===_0x57b429(0x1cc)||_0x5d4e23==='video')&&typeof _0x598713[_0x57b429(0x191)]===_0x57b429(0x184),_0x1345b0=_0x281ac8||_0x388092,{mediaKey:_0x1451d6,encBodyPath:_0x2976f8,bodyPath:_0x879d70,fileEncSha256:_0x32c652,fileSha256:_0x3bcb48,fileLength:_0x3db371,didSaveToTmpPath:_0x599453}=await(0x0,messages_media_1[_0x57b429(0x165)])(_0x598713[_0x57b429(0x1b2)],_0x5d4e23,_0x1345b0),_0x1c49b3=encodeURIComponent(_0x32c652[_0x57b429(0x168)](_0x57b429(0x1a7))[_0x57b429(0x199)](/\+/g,'-')[_0x57b429(0x199)](/\//g,'_')[_0x57b429(0x199)](/\=+$/,''));try{_0x388092&&(_0x598713[_0x57b429(0x191)]=await(0x0,messages_media_1[_0x57b429(0x1d6)])(_0x879d70,_0x5d4e23,_0x378fdc)),_0x281ac8&&(_0x598713['seconds']=await(0x0,messages_media_1[_0x57b429(0x173)])(_0x879d70));}catch(_0x2ddae0){(_0x413fca=_0x378fdc[_0x57b429(0x1d8)])===null||_0x413fca===void 0x0?void 0x0:_0x413fca[_0x57b429(0x1bc)]({'trace':_0x2ddae0['stack']},_0x57b429(0x1e2));}const {mediaUrl:_0x11abbd}=await _0x378fdc[_0x57b429(0x17a)]((0x0,fs_1[_0x57b429(0x197)])(_0x2976f8),{'fileEncSha256B64':_0x1c49b3,'mediaType':_0x5d4e23,'timeoutMs':_0x378fdc['mediaUploadTimeoutMs']});await Promise[_0x57b429(0x1c8)]([fs_1['promises'][_0x57b429(0x17d)](_0x2976f8),_0x599453&&_0x879d70&&fs_1[_0x57b429(0x1e7)][_0x57b429(0x17d)](_0x879d70)][_0x57b429(0x176)](Boolean)),delete _0x598713['media'];const _0x25c904=model_1[_0x57b429(0x19f)]['Message']['fromObject']({[_0x5d4e23+'Message']:MessageTypeProto[_0x5d4e23][_0x57b429(0x182)]({'url':_0x11abbd,'mediaKey':_0x1451d6,'fileEncSha256':_0x32c652,'fileSha256':_0x3bcb48,'fileLength':_0x3db371,..._0x598713})});return _0x251310&&_0x378fdc['mediaCache'][_0x57b429(0x1c6)](_0x251310,model_1[_0x57b429(0x19f)][_0x57b429(0x187)][_0x57b429(0x181)](_0x25c904)[_0x57b429(0x18d)]()),_0x25c904;};exports[a37_0x47d865(0x1a1)]=prepareWAMessageMedia;const prepareDisappearingMessageSettingContent=_0x46fcfe=>{const _0x1a57c0=a37_0x47d865;_0x46fcfe=_0x46fcfe||0x0;const _0xc9c39c={'ephemeralMessage':{'message':{'protocolMessage':{'type':model_1[_0x1a57c0(0x19f)][_0x1a57c0(0x188)][_0x1a57c0(0x1a8)][_0x1a57c0(0x16a)],'ephemeralExpiration':_0x46fcfe}}}};return model_1['WAProto'][_0x1a57c0(0x187)][_0x1a57c0(0x182)](_0xc9c39c);};function a37_0x338c(_0x3b141f,_0x44d7e3){const _0x1610f4=a37_0x1610();return a37_0x338c=function(_0x338c1b,_0x45547a){_0x338c1b=_0x338c1b-0x163;let _0x2e48bb=_0x1610f4[_0x338c1b];return _0x2e48bb;},a37_0x338c(_0x3b141f,_0x44d7e3);}exports[a37_0x47d865(0x1c7)]=prepareDisappearingMessageSettingContent;const generateForwardMessageContent=(_0xd8ceae,_0x372378)=>{const _0x381835=a37_0x47d865;var _0x407e51;let _0x3ed64d=_0xd8ceae[_0x381835(0x1e3)];if(!_0x3ed64d)throw new boom_1[(_0x381835(0x1d7))](_0x381835(0x1c2),{'statusCode':0x190});_0x3ed64d=JSON[_0x381835(0x1b9)](JSON[_0x381835(0x1af)](_0x3ed64d));let _0x1a9904=Object[_0x381835(0x170)](_0x3ed64d)[0x0],_0x58080c=((_0x407e51=_0x3ed64d[_0x1a9904]['contextInfo'])===null||_0x407e51===void 0x0?void 0x0:_0x407e51[_0x381835(0x166)])||0x0;_0x58080c+=_0xd8ceae[_0x381835(0x193)]['fromMe']&&!_0x372378?0x0:0x1;_0x1a9904==='conversation'&&(_0x3ed64d[_0x381835(0x1aa)]={'text':_0x3ed64d[_0x1a9904]},delete _0x3ed64d[_0x381835(0x167)],_0x1a9904=_0x381835(0x1aa));if(_0x58080c>0x0)_0x3ed64d[_0x1a9904][_0x381835(0x174)]={'forwardingScore':_0x58080c,'isForwarded':!![]};else _0x3ed64d[_0x1a9904]['contextInfo']={};return _0x3ed64d;};exports['generateForwardMessageContent']=generateForwardMessageContent;const generateWAMessageContent=async(_0xf9017a,_0x4a21e9)=>{const _0x1d38ac=a37_0x47d865;var _0x14ef2e,_0x3cbd7a;let _0x535dc6={};if(_0x1d38ac(0x1b5)in _0xf9017a){const _0x1e8407={..._0xf9017a};if(!!_0x4a21e9[_0x1d38ac(0x1b4)]&&_0xf9017a[_0x1d38ac(0x1b5)]['match'](mode_1['URL_REGEX']))try{const _0x1803a4=await _0x4a21e9[_0x1d38ac(0x1b4)](_0xf9017a[_0x1d38ac(0x1b5)]);_0x1e8407[_0x1d38ac(0x1ed)]=_0x1803a4[_0x1d38ac(0x1e9)],_0x1e8407[_0x1d38ac(0x1ee)]=_0x1803a4[_0x1d38ac(0x172)],_0x1e8407[_0x1d38ac(0x191)]=_0x1803a4[_0x1d38ac(0x191)],_0x1e8407[_0x1d38ac(0x1b0)]=_0x1803a4[_0x1d38ac(0x1b0)],_0x1e8407[_0x1d38ac(0x175)]=_0x1803a4['title'],_0x1e8407[_0x1d38ac(0x16d)]=0x0;}catch(_0x1c933d){(_0x14ef2e=_0x4a21e9[_0x1d38ac(0x1d8)])===null||_0x14ef2e===void 0x0?void 0x0:_0x14ef2e[_0x1d38ac(0x1c1)]({'trace':_0x1c933d[_0x1d38ac(0x1e8)]},_0x1d38ac(0x189));}_0x535dc6[_0x1d38ac(0x1aa)]=_0x1e8407;}else{if(_0x1d38ac(0x196)in _0xf9017a){const _0x4bf8fb=_0xf9017a['contacts'][_0x1d38ac(0x196)][_0x1d38ac(0x177)];if(!_0x4bf8fb)throw new boom_1['Boom'](_0x1d38ac(0x1ac),{'statusCode':0x190});_0x4bf8fb===0x1&&(_0x535dc6[_0x1d38ac(0x16e)]=model_1[_0x1d38ac(0x19f)][_0x1d38ac(0x1df)][_0x1d38ac(0x182)](_0xf9017a[_0x1d38ac(0x196)][_0x1d38ac(0x196)][0x0]));}else{if(_0x1d38ac(0x1ef)in _0xf9017a)_0x535dc6[_0x1d38ac(0x1b7)]=model_1[_0x1d38ac(0x19f)][_0x1d38ac(0x178)]['fromObject'](_0xf9017a[_0x1d38ac(0x1ef)]);else{if(_0x1d38ac(0x1db)in _0xf9017a)_0x535dc6['protocolMessage']={'key':_0xf9017a[_0x1d38ac(0x1db)],'type':model_1['WAProto'][_0x1d38ac(0x188)]['ProtocolMessageType']['REVOKE']};else{if(_0x1d38ac(0x17f)in _0xf9017a)_0x535dc6=(0x0,exports[_0x1d38ac(0x18c)])(_0xf9017a[_0x1d38ac(0x17f)],_0xf9017a['force']);else{if('disappearingMessagesInChat'in _0xf9017a){const _0x3045d1=typeof _0xf9017a[_0x1d38ac(0x180)]==='boolean'?_0xf9017a[_0x1d38ac(0x180)]?mode_1['WA_DEFAULT_EPHEMERAL']:0x0:_0xf9017a[_0x1d38ac(0x180)];_0x535dc6=(0x0,exports[_0x1d38ac(0x1c7)])(_0x3045d1);}else _0x535dc6=await(0x0,exports[_0x1d38ac(0x1a1)])(_0xf9017a,_0x4a21e9);}}}}}if('buttons'in _0xf9017a&&!!_0xf9017a[_0x1d38ac(0x1bf)]){const _0x2b4eb0={'buttons':_0xf9017a[_0x1d38ac(0x1bf)][_0x1d38ac(0x18b)](_0x2b756d=>({..._0x2b756d,'type':binary_1[_0x1d38ac(0x1e0)][_0x1d38ac(0x1de)][_0x1d38ac(0x1ea)][_0x1d38ac(0x1be)]}))};if('text'in _0xf9017a)_0x2b4eb0[_0x1d38ac(0x1ca)]=_0xf9017a[_0x1d38ac(0x1b5)],_0x2b4eb0[_0x1d38ac(0x1dc)]=ButtonType[_0x1d38ac(0x18f)];else{_0x1d38ac(0x19e)in _0xf9017a&&(_0x2b4eb0[_0x1d38ac(0x1ca)]=_0xf9017a[_0x1d38ac(0x19e)]);const _0x8ceae3=Object[_0x1d38ac(0x170)](_0x535dc6)[0x0][_0x1d38ac(0x199)]('Message','')[_0x1d38ac(0x1cf)]();_0x2b4eb0[_0x1d38ac(0x1dc)]=ButtonType[_0x8ceae3],Object[_0x1d38ac(0x18e)](_0x2b4eb0,_0x535dc6);}_0x1d38ac(0x1a2)in _0xf9017a&&!!_0xf9017a[_0x1d38ac(0x1a2)]&&(_0x2b4eb0[_0x1d38ac(0x1d0)]=_0xf9017a[_0x1d38ac(0x1a2)]),_0x535dc6={'buttonsMessage':_0x2b4eb0};}else{if(_0x1d38ac(0x1ce)in _0xf9017a&&!!_0xf9017a[_0x1d38ac(0x1ce)]){const _0x594000={'hydratedTemplate':{'hydratedButtons':_0xf9017a[_0x1d38ac(0x1ce)]}};_0x1d38ac(0x1b5)in _0xf9017a?_0x594000[_0x1d38ac(0x1f0)][_0x1d38ac(0x169)]=_0xf9017a[_0x1d38ac(0x1b5)]:('caption'in _0xf9017a&&(_0x594000['hydratedTemplate'][_0x1d38ac(0x169)]=_0xf9017a[_0x1d38ac(0x19e)]),Object[_0x1d38ac(0x18e)](_0x594000[_0x1d38ac(0x1f0)],_0x535dc6)),'footer'in _0xf9017a&&!!_0xf9017a['footer']&&(_0x594000['hydratedTemplate'][_0x1d38ac(0x1ab)]=_0xf9017a[_0x1d38ac(0x1a2)]),_0x535dc6={'templateMessage':_0x594000};}}_0x1d38ac(0x1c0)in _0xf9017a&&!!_0xf9017a['viewOnce']&&(_0x535dc6={'viewOnceMessage':{'message':_0x535dc6}});if(_0x1d38ac(0x1b8)in _0xf9017a&&((_0x3cbd7a=_0xf9017a['mentions'])===null||_0x3cbd7a===void 0x0?void 0x0:_0x3cbd7a[_0x1d38ac(0x177)])){const [_0x54f641]=Object['keys'](_0x535dc6);_0x535dc6[_0x54f641][_0x1d38ac(0x174)]=_0x535dc6[_0x54f641]||{},_0x535dc6[_0x54f641][_0x1d38ac(0x174)][_0x1d38ac(0x186)]=_0xf9017a[_0x1d38ac(0x1b8)];}return model_1[_0x1d38ac(0x19f)][_0x1d38ac(0x187)][_0x1d38ac(0x182)](_0x535dc6);};function a37_0x1610(){const _0x36836e=['__esModule','WebMessageInfo','canonicalUrl','matchedText','location','hydratedTemplate','generateWAMessage','ButtonsMessageHeaderType','encryptedStream','forwardingScore','conversation','toString','hydratedContentText','EPHEMERAL_SETTING','DocumentMessage','mimetype','previewType','contactMessage','@hapi/boom','keys','../binary','matched-text','getAudioDuration','contextInfo','title','filter','length','LocationMessage','video/mp4','upload','participant','1653568caEpSh','unlink','MEDIA_KEYS','forward','disappearingMessagesInChat','encode','fromObject','../mode','undefined','remoteJid','mentionedJid','Message','ProtocolMessage','url\x20generation\x20failed','20774388LIfsCE','map','generateForwardMessageContent','finish','assign','EMPTY','viewOnceMessage','jpegThumbnail','PENDING','key','documentMessage','generateWAMessageFromContent','contacts','createReadStream','4IODDIW','replace','WAMessageStatus','imageMessage','generateWAMessageContent','file','caption','WAProto','stanzaId','prepareWAMessageMedia','footer','get','1520eNQJHE','@g.us','protocolMessage','base64','ProtocolMessageType','ephemeralMessage','extendedTextMessage','hydratedFooterText','require\x20atleast\x201\x20contact','1625700GYwYwR','buttonsMessage','stringify','description','videoMessage','media','fileName','getUrlInfo','text','../model','locationMessage','mentions','parse','386XGORPF','url','info','./messages-media','RESPONSE','buttons','viewOnce','warn','no\x20content\x20in\x20message','timestamp','ephemeralExpiration','7mBkPiq','set','prepareDisappearingMessageSettingContent','all','ButtonsMessage','contentText','includes','image','3551QkGOfK','templateButtons','toUpperCase','footerText','mediaCache','11asqlMu','document','defineProperty','object','generateThumbnail','Boom','logger','extractMessageContent','2692707EHZkkO','delete','headerType','audio/ogg;\x20codecs=opus','Button','ContactMessage','proto','application/x-protobuf','failed\x20to\x20obtain\x20extra\x20info','message','decode','1599102znfwpf','57114QUhMeU','promises','stack','canonical-url','ButtonType'];a37_0x1610=function(){return _0x36836e;};return a37_0x1610();}exports['generateWAMessageContent']=generateWAMessageContent;const generateWAMessageFromContent=(_0x3366e1,_0x3cd03b,_0x1ea472)=>{const _0x2b9d03=a37_0x47d865;if(!_0x1ea472[_0x2b9d03(0x1c3)])_0x1ea472['timestamp']=new Date();const _0x326219=Object['keys'](_0x3cd03b)[0x0],_0x2cc6f7=(0x0,generics_1['unixTimestampSeconds'])(_0x1ea472[_0x2b9d03(0x1c3)]),{quoted:_0x33b663,userJid:_0xbe4ed9}=_0x1ea472;if(_0x33b663){const _0x3ee89a=_0x33b663[_0x2b9d03(0x193)]['fromMe']?_0xbe4ed9:_0x33b663[_0x2b9d03(0x17b)]||_0x33b663['key'][_0x2b9d03(0x17b)]||_0x33b663['key'][_0x2b9d03(0x185)];_0x3cd03b[_0x326219][_0x2b9d03(0x174)]=_0x3cd03b[_0x326219][_0x2b9d03(0x174)]||{},_0x3cd03b[_0x326219][_0x2b9d03(0x174)]['participant']=_0x3ee89a,_0x3cd03b[_0x326219][_0x2b9d03(0x174)][_0x2b9d03(0x1a0)]=_0x33b663['key']['id'],_0x3cd03b[_0x326219]['contextInfo']['quotedMessage']=_0x33b663[_0x2b9d03(0x1e3)],_0x33b663[_0x2b9d03(0x193)][_0x2b9d03(0x17b)]&&(_0x3cd03b[_0x326219][_0x2b9d03(0x174)][_0x2b9d03(0x185)]=_0x33b663['key'][_0x2b9d03(0x185)]);}!!(_0x1ea472===null||_0x1ea472===void 0x0?void 0x0:_0x1ea472[_0x2b9d03(0x1c4)])&&_0x326219!==_0x2b9d03(0x1a6)&&_0x326219!==_0x2b9d03(0x1a9)&&(_0x3cd03b[_0x326219][_0x2b9d03(0x174)]={..._0x3cd03b[_0x326219][_0x2b9d03(0x174)]||{},'expiration':_0x1ea472[_0x2b9d03(0x1c4)]||mode_1['WA_DEFAULT_EPHEMERAL']},_0x3cd03b={'ephemeralMessage':{'message':_0x3cd03b}});_0x3cd03b=model_1[_0x2b9d03(0x19f)][_0x2b9d03(0x187)][_0x2b9d03(0x182)](_0x3cd03b);const _0x19a209={'key':{'remoteJid':_0x3366e1,'fromMe':!![],'id':(_0x1ea472===null||_0x1ea472===void 0x0?void 0x0:_0x1ea472['messageId'])||(0x0,generics_1['generateMessageID'])()},'message':_0x3cd03b,'messageTimestamp':_0x2cc6f7,'messageStubParameters':[],'participant':_0x3366e1[_0x2b9d03(0x1cb)](_0x2b9d03(0x1a5))?_0xbe4ed9:undefined,'status':model_1[_0x2b9d03(0x19a)][_0x2b9d03(0x192)]};return model_1['WAProto'][_0x2b9d03(0x1ec)]['fromObject'](_0x19a209);};exports['generateWAMessageFromContent']=generateWAMessageFromContent;const generateWAMessage=async(_0x204ff7,_0x2d0851,_0xce9775)=>(0x0,exports[a37_0x47d865(0x195)])(_0x204ff7,await(0x0,exports[a37_0x47d865(0x19c)])(_0x2d0851,_0xce9775),_0xce9775);exports['generateWAMessage']=generateWAMessage;const extractMessageContent=_0x481836=>{const _0x2c4a48=a37_0x47d865;var _0x4c8043,_0x475780;_0x481836=((_0x4c8043=_0x481836===null||_0x481836===void 0x0?void 0x0:_0x481836[_0x2c4a48(0x1a9)])===null||_0x4c8043===void 0x0?void 0x0:_0x4c8043[_0x2c4a48(0x1e3)])||((_0x475780=_0x481836===null||_0x481836===void 0x0?void 0x0:_0x481836[_0x2c4a48(0x190)])===null||_0x475780===void 0x0?void 0x0:_0x475780['message'])||_0x481836||undefined;if(_0x481836===null||_0x481836===void 0x0?void 0x0:_0x481836[_0x2c4a48(0x1ae)]){const {buttonsMessage:_0x3be086}=_0x481836;if(_0x3be086[_0x2c4a48(0x19b)])return{'imageMessage':_0x3be086[_0x2c4a48(0x19b)]};else{if(_0x3be086['documentMessage'])return{'documentMessage':_0x3be086[_0x2c4a48(0x194)]};else{if(_0x3be086['videoMessage'])return{'videoMessage':_0x3be086[_0x2c4a48(0x1b1)]};else return _0x3be086[_0x2c4a48(0x1b7)]?{'locationMessage':_0x3be086[_0x2c4a48(0x1b7)]}:{'conversation':_0x3be086[_0x2c4a48(0x1ca)]};}}}return _0x481836;};exports[a37_0x47d865(0x1d9)]=extractMessageContent;
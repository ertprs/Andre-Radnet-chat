'use strict';const a39_0x65b8a3=a39_0x5ad7;(function(_0xc621aa,_0x4f0c38){const _0x280b33=a39_0x5ad7,_0x794f95=_0xc621aa();while(!![]){try{const _0x5ce6f6=parseInt(_0x280b33(0x122))/0x1*(-parseInt(_0x280b33(0xe7))/0x2)+parseInt(_0x280b33(0xce))/0x3*(parseInt(_0x280b33(0xd0))/0x4)+-parseInt(_0x280b33(0xc5))/0x5+-parseInt(_0x280b33(0xe0))/0x6+-parseInt(_0x280b33(0x102))/0x7*(parseInt(_0x280b33(0xde))/0x8)+parseInt(_0x280b33(0xf0))/0x9*(parseInt(_0x280b33(0xc8))/0xa)+parseInt(_0x280b33(0xcf))/0xb;if(_0x5ce6f6===_0x4f0c38)break;else _0x794f95['push'](_0x794f95['shift']());}catch(_0x3c44ac){_0x794f95['push'](_0x794f95['shift']());}}}(a39_0xa527,0xed3ab));var __createBinding=this&&this[a39_0x65b8a3(0x103)]||(Object['create']?function(_0x36958d,_0x162f9d,_0x51e2bb,_0x523bd3){const _0xf54000=a39_0x65b8a3;if(_0x523bd3===undefined)_0x523bd3=_0x51e2bb;Object[_0xf54000(0x11a)](_0x36958d,_0x523bd3,{'enumerable':!![],'get':function(){return _0x162f9d[_0x51e2bb];}});}:function(_0x377f62,_0x34222e,_0x19b778,_0x49ff66){if(_0x49ff66===undefined)_0x49ff66=_0x19b778;_0x377f62[_0x49ff66]=_0x34222e[_0x19b778];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a39_0x65b8a3(0xd7)]?function(_0x4b825c,_0x5af474){const _0x3af1bf=a39_0x65b8a3;Object[_0x3af1bf(0x11a)](_0x4b825c,'default',{'enumerable':!![],'value':_0x5af474});}:function(_0x5912ff,_0x1e4bdc){const _0x2547cb=a39_0x65b8a3;_0x5912ff[_0x2547cb(0x109)]=_0x1e4bdc;}),__importStar=this&&this[a39_0x65b8a3(0x111)]||function(_0x2ce512){const _0x2cd59e=a39_0x65b8a3;if(_0x2ce512&&_0x2ce512[_0x2cd59e(0x114)])return _0x2ce512;var _0x1973a4={};if(_0x2ce512!=null){for(var _0x1dfebf in _0x2ce512)if(_0x1dfebf!==_0x2cd59e(0x109)&&Object[_0x2cd59e(0xcb)][_0x2cd59e(0xf7)][_0x2cd59e(0xee)](_0x2ce512,_0x1dfebf))__createBinding(_0x1973a4,_0x2ce512,_0x1dfebf);}return __setModuleDefault(_0x1973a4,_0x2ce512),_0x1973a4;};Object[a39_0x65b8a3(0x11a)](exports,a39_0x65b8a3(0x114),{'value':!![]}),exports[a39_0x65b8a3(0xfa)]=exports['parseAndInjectE2ESession']=exports[a39_0x65b8a3(0x112)]=exports[a39_0x65b8a3(0xe6)]=exports['decryptSignalProto']=exports[a39_0x65b8a3(0xef)]=exports[a39_0x65b8a3(0x117)]=exports['signalStorage']=exports[a39_0x65b8a3(0xe9)]=exports[a39_0x65b8a3(0xc9)]=exports['generateOrGetPreKeys']=exports[a39_0x65b8a3(0xe1)]=exports['createSignalIdentity']=exports[a39_0x65b8a3(0xcd)]=exports['jidToSignalProtocolAddress']=exports[a39_0x65b8a3(0xe8)]=void 0x0;const libsignal=__importStar(require(a39_0x65b8a3(0x10a))),generics_1=require(a39_0x65b8a3(0xdb)),crypto_1=require(a39_0x65b8a3(0x115)),signal_1=require('../signal'),bin_1=require(a39_0x65b8a3(0x101)),generateSignalPubKey=_0x51d95f=>{const _0x47bce3=a39_0x65b8a3,_0x154455=Buffer[_0x47bce3(0xd3)](0x21);return _0x154455[_0x47bce3(0x11c)]([0x5],0x0),_0x154455[_0x47bce3(0x11c)](_0x51d95f,0x1),_0x154455;};exports[a39_0x65b8a3(0xe8)]=generateSignalPubKey;const jidToSignalAddress=_0x300447=>_0x300447[a39_0x65b8a3(0xd6)]('@')[0x0],jidToSignalProtocolAddress=_0x407a60=>{const _0x552656=a39_0x65b8a3;return new libsignal[(_0x552656(0xea))](jidToSignalAddress(_0x407a60),0x0);};exports[a39_0x65b8a3(0xec)]=jidToSignalProtocolAddress;const jidToSignalSenderKeyName=(_0x236be3,_0x917b8d)=>{const _0x407d79=a39_0x65b8a3;return new signal_1[(_0x407d79(0x106))](_0x236be3,(0x0,exports['jidToSignalProtocolAddress'])(_0x917b8d))['toString']();};exports[a39_0x65b8a3(0xcd)]=jidToSignalSenderKeyName;const createSignalIdentity=(_0x572bb9,_0x18d8da)=>{const _0x3ce338=a39_0x65b8a3;return{'identifier':{'name':_0x572bb9,'deviceId':0x0},'identifierKey':(0x0,exports[_0x3ce338(0xe8)])(_0x18d8da)};};exports[a39_0x65b8a3(0xff)]=createSignalIdentity;const getPreKeys=async({getPreKey:_0x13c494},_0x80d3b1,_0x2e118a)=>{const _0x4117e6={};for(let _0x15c25e=_0x80d3b1;_0x15c25e<_0x2e118a;_0x15c25e++){const _0x11e522=await _0x13c494(_0x15c25e);if(_0x11e522)_0x4117e6[+_0x15c25e]=_0x11e522;}return _0x4117e6;};exports['getPreKeys']=getPreKeys;const generateOrGetPreKeys=(_0x3da879,_0x3a2238)=>{const _0x3f8a47=a39_0x65b8a3,_0xff308d=_0x3da879[_0x3f8a47(0x10c)]-_0x3da879[_0x3f8a47(0xd8)],_0x4b4493=_0x3a2238-_0xff308d,_0x36012b=_0x3da879[_0x3f8a47(0x10c)]+_0x4b4493-0x1,_0x4c6c1a={};if(_0x4b4493>0x0)for(let _0x37aa14=_0x3da879['nextPreKeyId'];_0x37aa14<=_0x36012b;_0x37aa14++){_0x4c6c1a[_0x37aa14]=crypto_1[_0x3f8a47(0x104)][_0x3f8a47(0xc6)]();}return{'newPreKeys':_0x4c6c1a,'lastPreKeyId':_0x36012b,'preKeysRange':[_0x3da879[_0x3f8a47(0xd8)],_0x3a2238]};};exports[a39_0x65b8a3(0xfc)]=generateOrGetPreKeys;const xmppSignedPreKey=_0x3555af=>({'tag':'skey','attrs':{},'content':[{'tag':'id','attrs':{},'content':(0x0,generics_1['encodeBigEndian'])(_0x3555af[a39_0x65b8a3(0xf6)],0x3)},{'tag':'value','attrs':{},'content':_0x3555af['keyPair'][a39_0x65b8a3(0xd1)]},{'tag':'signature','attrs':{},'content':_0x3555af['signature']}]});exports[a39_0x65b8a3(0xc9)]=xmppSignedPreKey;const xmppPreKey=(_0x215739,_0x37b190)=>({'tag':'key','attrs':{},'content':[{'tag':'id','attrs':{},'content':(0x0,generics_1[a39_0x65b8a3(0x121)])(_0x37b190,0x3)},{'tag':a39_0x65b8a3(0x10d),'attrs':{},'content':_0x215739[a39_0x65b8a3(0xd1)]}]});exports[a39_0x65b8a3(0xe9)]=xmppPreKey;const signalStorage=({creds:_0x523a57,keys:_0x42aa71})=>({'loadSession':async _0x1c7027=>{const _0x3d88b4=a39_0x65b8a3,_0x44214e=await _0x42aa71[_0x3d88b4(0x119)](_0x1c7027);if(_0x44214e)return libsignal[_0x3d88b4(0xdc)][_0x3d88b4(0x120)](_0x44214e);},'storeSession':async(_0x487763,_0x1d853b)=>{const _0x592b23=a39_0x65b8a3;await _0x42aa71['setSession'](_0x487763,_0x1d853b[_0x592b23(0xeb)]());},'isTrustedIdentity':()=>{return!![];},'loadPreKey':async _0x469a00=>{const _0x1cc672=a39_0x65b8a3,_0x5cb87f=await _0x42aa71['getPreKey'](_0x469a00);if(_0x5cb87f)return{'privKey':Buffer['from'](_0x5cb87f[_0x1cc672(0xc7)]),'pubKey':Buffer[_0x1cc672(0xe2)](_0x5cb87f[_0x1cc672(0xd1)])};},'removePreKey':_0x28d9cb=>_0x42aa71[a39_0x65b8a3(0x11d)](_0x28d9cb,null),'loadSignedPreKey':_0x45d036=>{const _0x5ea59e=a39_0x65b8a3,_0x3850c8=_0x523a57['signedPreKey'];return{'privKey':Buffer[_0x5ea59e(0xe2)](_0x3850c8['keyPair']['private']),'pubKey':Buffer[_0x5ea59e(0xe2)](_0x3850c8[_0x5ea59e(0xf4)][_0x5ea59e(0xd1)])};},'loadSenderKey':async _0x5b4492=>{const _0x365b7a=a39_0x65b8a3,_0x26bb30=await _0x42aa71['getSenderKey'](_0x5b4492);if(_0x26bb30)return new signal_1[(_0x365b7a(0xe4))](_0x26bb30);},'storeSenderKey':async(_0x2954e6,_0x2dfde6)=>{const _0x328ab5=a39_0x65b8a3;await _0x42aa71[_0x328ab5(0xfe)](_0x2954e6,_0x2dfde6[_0x328ab5(0xeb)]());},'getOurRegistrationId':()=>_0x523a57[a39_0x65b8a3(0xdd)],'getOurIdentity':()=>{const _0x46cf25=a39_0x65b8a3,{signedIdentityKey:_0x42f64c}=_0x523a57;return{'privKey':Buffer[_0x46cf25(0xe2)](_0x42f64c['private']),'pubKey':(0x0,exports[_0x46cf25(0xe8)])(_0x42f64c[_0x46cf25(0xd1)])};}});exports[a39_0x65b8a3(0xd5)]=signalStorage;const decryptGroupSignalProto=(_0x58db3e,_0x30381f,_0x1d7026,_0x1ec4a0)=>{const _0x3a52d0=a39_0x65b8a3,_0x15cb96=(0x0,exports[_0x3a52d0(0xcd)])(_0x58db3e,_0x30381f),_0x662446=new signal_1['GroupCipher']((0x0,exports[_0x3a52d0(0xd5)])(_0x1ec4a0),_0x15cb96);return _0x662446[_0x3a52d0(0xdf)](Buffer[_0x3a52d0(0xe2)](_0x1d7026));};exports['decryptGroupSignalProto']=decryptGroupSignalProto;const processSenderKeyMessage=async(_0x5abccc,_0x308a06,_0x529e8e)=>{const _0x11beb4=a39_0x65b8a3,_0x2125db=new signal_1[(_0x11beb4(0x10f))]((0x0,exports[_0x11beb4(0xd5)])(_0x529e8e)),_0x153c85=(0x0,exports['jidToSignalSenderKeyName'])(_0x308a06['groupId'],_0x5abccc),_0x4c69ee=new signal_1[(_0x11beb4(0xf3))](null,null,null,null,_0x308a06[_0x11beb4(0xd9)]),_0x49a70b=await _0x529e8e[_0x11beb4(0xd2)][_0x11beb4(0xcc)](_0x153c85);if(!_0x49a70b){const _0x53ec99=new signal_1[(_0x11beb4(0xe4))]();await _0x529e8e[_0x11beb4(0xd2)][_0x11beb4(0xfe)](_0x153c85,_0x53ec99);}await _0x2125db[_0x11beb4(0x118)](_0x153c85,_0x4c69ee);};exports['processSenderKeyMessage']=processSenderKeyMessage;const decryptSignalProto=async(_0x2b20fa,_0x35f9bb,_0x46d5e7,_0x5ae10b)=>{const _0x5d4e52=a39_0x65b8a3,_0x4bc0fa=(0x0,exports[_0x5d4e52(0xec)])(_0x2b20fa),_0x521bd0=new libsignal[(_0x5d4e52(0x11b))]((0x0,exports['signalStorage'])(_0x5ae10b),_0x4bc0fa);let _0x40da19;switch(_0x35f9bb){case'pkmsg':_0x40da19=await _0x521bd0['decryptPreKeyWhisperMessage'](_0x46d5e7);break;case _0x5d4e52(0x10e):_0x40da19=await _0x521bd0[_0x5d4e52(0xf9)](_0x46d5e7);break;}return _0x40da19;};exports['decryptSignalProto']=decryptSignalProto;const encryptSignalProto=async(_0x1bd852,_0x271cf2,_0x748c93)=>{const _0x53d156=a39_0x65b8a3,_0x46c842=(0x0,exports[_0x53d156(0xec)])(_0x1bd852),_0x4f5e5b=new libsignal[(_0x53d156(0x11b))]((0x0,exports[_0x53d156(0xd5)])(_0x748c93),_0x46c842),{type:_0x250424,body:_0x2df9c4}=await _0x4f5e5b[_0x53d156(0x110)](_0x271cf2);return{'type':_0x250424===0x3?_0x53d156(0xe3):_0x53d156(0x10e),'ciphertext':Buffer[_0x53d156(0xe2)](_0x2df9c4,_0x53d156(0xf8))};};exports[a39_0x65b8a3(0xe6)]=encryptSignalProto;const encryptSenderKeyMsgSignalProto=async(_0x394541,_0x581a9d,_0x12f970,_0x35f8e7)=>{const _0x36754c=a39_0x65b8a3,_0x5b1874=(0x0,exports[_0x36754c(0xd5)])(_0x35f8e7),_0x42942c=(0x0,exports[_0x36754c(0xcd)])(_0x394541,_0x12f970),_0x334967=new signal_1[(_0x36754c(0x10f))](_0x5b1874),_0x41ab01=await _0x35f8e7[_0x36754c(0xd2)]['getSenderKey'](_0x42942c);if(!_0x41ab01){const _0x35eb91=new signal_1['SenderKeyRecord']();await _0x35f8e7[_0x36754c(0xd2)][_0x36754c(0xfe)](_0x42942c,_0x35eb91);}const _0x5cb24a=await _0x334967[_0x36754c(0xd7)](_0x42942c),_0x4fa841=new signal_1[(_0x36754c(0x100))](_0x5b1874,_0x42942c);return{'ciphertext':await _0x4fa841['encrypt'](_0x581a9d),'senderKeyDistributionMessageKey':_0x5cb24a['serialize']()};};exports[a39_0x65b8a3(0x112)]=encryptSenderKeyMsgSignalProto;const parseAndInjectE2ESession=async(_0x2c57e8,_0x24cb87)=>{const _0x3c4878=a39_0x65b8a3,_0x39d698=_0x1dfa12=>_0x1dfa12?{'keyId':(0x0,bin_1[_0x3c4878(0xca)])(_0x1dfa12,'id',0x3),'publicKey':(0x0,exports['generateSignalPubKey'])((0x0,bin_1[_0x3c4878(0x124)])(_0x1dfa12,'value')),'signature':(0x0,bin_1[_0x3c4878(0x124)])(_0x1dfa12,_0x3c4878(0xd4))}:undefined;_0x2c57e8=(0x0,bin_1['getBinaryNodeChild'])((0x0,bin_1[_0x3c4878(0x107)])(_0x2c57e8,'list'),_0x3c4878(0xed)),(0x0,bin_1[_0x3c4878(0x11e)])(_0x2c57e8);const _0x3c91b7=(0x0,bin_1[_0x3c4878(0x107)])(_0x2c57e8,'skey'),_0x1cd93=(0x0,bin_1[_0x3c4878(0x107)])(_0x2c57e8,_0x3c4878(0x108)),_0x100e2b=(0x0,bin_1[_0x3c4878(0x124)])(_0x2c57e8,_0x3c4878(0xfd)),_0x40c90b=_0x2c57e8[_0x3c4878(0x105)][_0x3c4878(0xe5)],_0x2cdbf9=(0x0,bin_1[_0x3c4878(0xca)])(_0x2c57e8,_0x3c4878(0x11f),0x4),_0x1dff50={'registrationId':_0x2cdbf9,'identityKey':(0x0,exports[_0x3c4878(0xe8)])(_0x100e2b),'signedPreKey':_0x39d698(_0x3c91b7),'preKey':_0x39d698(_0x1cd93)},_0x1a465f=new libsignal[(_0x3c4878(0xc4))]((0x0,exports[_0x3c4878(0xd5)])(_0x24cb87),(0x0,exports[_0x3c4878(0xec)])(_0x40c90b));await _0x1a465f[_0x3c4878(0xf2)](_0x1dff50);};exports[a39_0x65b8a3(0x113)]=parseAndInjectE2ESession;const extractDeviceJids=(_0x386215,_0x2ea6df,_0x559dec)=>{const _0x2cfb47=a39_0x65b8a3;var _0x5e3126;const {user:_0xc81e51,device:_0x235557}=(0x0,bin_1['jidDecode'])(_0x2ea6df),_0x3857ce=[];for(const _0x47d460 of _0x386215[_0x2cfb47(0xf1)]){const _0x4d58d1=(_0x5e3126=(0x0,bin_1['getBinaryNodeChild'])(_0x47d460,_0x2cfb47(0x10b)))===null||_0x5e3126===void 0x0?void 0x0:_0x5e3126[_0x2cfb47(0xf1)];if(_0x4d58d1&&Array[_0x2cfb47(0xda)](_0x4d58d1))for(const _0x1cc809 of _0x4d58d1){const {user:_0x1c0745}=(0x0,bin_1[_0x2cfb47(0x123)])(_0x1cc809['attrs']['jid']),_0x4cc58d=(0x0,bin_1[_0x2cfb47(0x107)])(_0x1cc809,_0x2cfb47(0xf5)),_0x61348d=(0x0,bin_1[_0x2cfb47(0x107)])(_0x4cc58d,'device-list');if(Array[_0x2cfb47(0xda)](_0x61348d===null||_0x61348d===void 0x0?void 0x0:_0x61348d[_0x2cfb47(0xf1)]))for(const {tag:_0x354045,attrs:_0x49eb7c}of _0x61348d[_0x2cfb47(0xf1)]){const _0x2ff20c=+_0x49eb7c['id'];_0x354045===_0x2cfb47(0xfb)&&(!_0x559dec||_0x2ff20c!==0x0)&&(_0xc81e51!==_0x1c0745||_0x235557!==_0x2ff20c)&&(_0x2ff20c===0x0||!!_0x49eb7c['key-index'])&&_0x3857ce[_0x2cfb47(0x116)]({'user':_0x1c0745,'device':_0x2ff20c});}}}return _0x3857ce;};exports[a39_0x65b8a3(0xfa)]=extractDeviceJids;function a39_0x5ad7(_0x45c8d2,_0x3f9e48){const _0xa52710=a39_0xa527();return a39_0x5ad7=function(_0x5ad773,_0x5903a5){_0x5ad773=_0x5ad773-0xc4;let _0x1a8cb0=_0xa52710[_0x5ad773];return _0x1a8cb0;},a39_0x5ad7(_0x45c8d2,_0x3f9e48);}function a39_0xa527(){const _0x44d4ef=['process','getSession','defineProperty','SessionCipher','set','setPreKey','assertNodeErrorFree','registration','deserialize','encodeBigEndian','322243zqRMWa','jidDecode','getBinaryNodeChildBuffer','SessionBuilder','2404580YzKOmL','generateKeyPair','private','40dmrKSI','xmppSignedPreKey','getBinaryNodeChildUInt','prototype','getSenderKey','jidToSignalSenderKeyName','3vpBIZY','10590283GgoDuM','2715256DbcPCh','public','keys','alloc','signature','signalStorage','split','create','firstUnuploadedPreKeyId','axolotlSenderKeyDistributionMessage','isArray','./generics','SessionRecord','registrationId','288cPyfbq','decrypt','3685134rNaLTB','getPreKeys','from','pkmsg','SenderKeyRecord','jid','encryptSignalProto','2XYnqND','generateSignalPubKey','xmppPreKey','ProtocolAddress','serialize','jidToSignalProtocolAddress','user','call','processSenderKeyMessage','2740401TcZYbz','content','initOutgoing','SenderKeyDistributionMessage','keyPair','devices','keyId','hasOwnProperty','binary','decryptWhisperMessage','extractDeviceJids','device','generateOrGetPreKeys','identity','setSenderKey','createSignalIdentity','GroupCipher','../bin','91483thDkfl','__createBinding','Curve','attrs','SenderKeyName','getBinaryNodeChild','key','default','libsignal','list','nextPreKeyId','value','msg','GroupSessionBuilder','encrypt','__importStar','encryptSenderKeyMsgSignalProto','parseAndInjectE2ESession','__esModule','./crypto','push','decryptGroupSignalProto'];a39_0xa527=function(){return _0x44d4ef;};return a39_0xa527();}
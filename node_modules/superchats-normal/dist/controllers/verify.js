'use strict';function a15_0x113d(_0x3e2a56,_0xefd57c){const _0x4d4a5b=a15_0x4d4a();return a15_0x113d=function(_0x113d45,_0x2c52bf){_0x113d45=_0x113d45-0x103;let _0x434cb8=_0x4d4a5b[_0x113d45];return _0x434cb8;},a15_0x113d(_0x3e2a56,_0xefd57c);}const a15_0x3f83c3=a15_0x113d;function a15_0x4d4a(){const _0x411411=['existsSync','public','error\x20in\x20QR\x20gen','2062482XtYiAY','query','resolving\x20login\x20challenge','62FIJzdd','concat','version','takeover','sending\x20login\x20request','macKey','curve25519-js','reconnect','from','endConnection','Unexpected\x20error\x20in\x20login','generateKeyPair','hkdf','@s.whatsapp.net','base64','challenge','154159gAQcHL','default','./tokens/','__esModule','chats','cancel','token\x20removed\x20with\x20success!','873nXcRbh','validateNewConnection','.json','admin','conn','incorrect\x20secret\x20length\x20received:\x20','@c.us','waitForMessage','__createBinding','clear','statusFind','whatsappID','sharedKey','41691uDykqh','initTimeout','serverToken','hmacSign','connectOptions','prototype','info','login','__importDefault','isNewUser','secret','state','battery','generateKeysForAuth','push','toString','init','browserDescription','join','debug','52fgIeBl','reref','user','private','slice','12590ofwgEo','close','authInfo','qrReadFail','warn','Erros','replace','create','message','readyState','logger','authenticate','generateMessageTag','SuperChats','2939144uGriXB','open','status-connect','requestNewQRCodeRef','unlinkSync','OPEN','regenerating\x20QR','respondToChallenge','call','Received\x20login\x20timeout\x20req\x20when\x20WS\x20not\x20open,\x20ignoring...','emit','status','curveKeys','./variables','clientID','length','pushname','wid','canLogin','defineProperty','41890xLPSAa','./useful','Conn','2818522hIhtDU','clientToken','start','equals','jid'];a15_0x4d4a=function(){return _0x411411;};return a15_0x4d4a();}(function(_0xa0601d,_0x2de00b){const _0x2b2807=a15_0x113d,_0x1db5c1=_0xa0601d();while(!![]){try{const _0x265a95=parseInt(_0x2b2807(0x11e))/0x1+-parseInt(_0x2b2807(0x10e))/0x2*(-parseInt(_0x2b2807(0x132))/0x3)+-parseInt(_0x2b2807(0x146))/0x4*(parseInt(_0x2b2807(0x16d))/0x5)+-parseInt(_0x2b2807(0x10b))/0x6+-parseInt(_0x2b2807(0x103))/0x7+parseInt(_0x2b2807(0x159))/0x8+-parseInt(_0x2b2807(0x125))/0x9*(-parseInt(_0x2b2807(0x14b))/0xa);if(_0x265a95===_0x2de00b)break;else _0x1db5c1['push'](_0x1db5c1['shift']());}catch(_0x1e4644){_0x1db5c1['push'](_0x1db5c1['shift']());}}}(a15_0x4d4a,0x35827));var __createBinding=this&&this[a15_0x3f83c3(0x12d)]||(Object[a15_0x3f83c3(0x152)]?function(_0x3270e9,_0x5f1da6,_0x233084,_0x3d326e){const _0x1f3848=a15_0x3f83c3;if(_0x3d326e===undefined)_0x3d326e=_0x233084;Object[_0x1f3848(0x16c)](_0x3270e9,_0x3d326e,{'enumerable':!![],'get':function(){return _0x5f1da6[_0x233084];}});}:function(_0x133f7b,_0x1246e0,_0x226e00,_0x23a3db){if(_0x23a3db===undefined)_0x23a3db=_0x226e00;_0x133f7b[_0x23a3db]=_0x1246e0[_0x226e00];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a15_0x3f83c3(0x152)]?function(_0x28c236,_0x7f93ff){const _0x426dd5=a15_0x3f83c3;Object[_0x426dd5(0x16c)](_0x28c236,'default',{'enumerable':!![],'value':_0x7f93ff});}:function(_0x14780,_0x43e7d5){const _0x1f8d64=a15_0x3f83c3;_0x14780[_0x1f8d64(0x11f)]=_0x43e7d5;}),__importStar=this&&this['__importStar']||function(_0x7d73b1){const _0x324581=a15_0x3f83c3;if(_0x7d73b1&&_0x7d73b1[_0x324581(0x121)])return _0x7d73b1;var _0x3d9d11={};if(_0x7d73b1!=null){for(var _0x50a671 in _0x7d73b1)if(_0x50a671!=='default'&&Object[_0x324581(0x137)]['hasOwnProperty'][_0x324581(0x161)](_0x7d73b1,_0x50a671))__createBinding(_0x3d9d11,_0x7d73b1,_0x50a671);}return __setModuleDefault(_0x3d9d11,_0x7d73b1),_0x3d9d11;},__importDefault=this&&this[a15_0x3f83c3(0x13a)]||function(_0x54073a){const _0x383fb1=a15_0x3f83c3;return _0x54073a&&_0x54073a[_0x383fb1(0x121)]?_0x54073a:{'default':_0x54073a};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a15_0x3f83c3(0x158)]=void 0x0;const Curve=__importStar(require(a15_0x3f83c3(0x114))),Utils=__importStar(require(a15_0x3f83c3(0x16e))),main_1=require('./main'),fs_1=__importDefault(require('fs')),variables_1=require(a15_0x3f83c3(0x166));class SuperChats extends main_1[a15_0x3f83c3(0x158)]{async[a15_0x3f83c3(0x156)](_0x517b36){const _0x11c477=a15_0x3f83c3;var _0x282ee4,_0x223834,_0x2d9ca6,_0x28be9f,_0x278de8,_0x449fef;!((_0x282ee4=this[_0x11c477(0x14d)])===null||_0x282ee4===void 0x0?void 0x0:_0x282ee4[_0x11c477(0x167)])&&(this[_0x11c477(0x14d)]={'clientID':Utils['generateClientID']()});const _0x214a72=this[_0x11c477(0x16b)]();this['referenceDate']=new Date(),this['connectionDebounceTimeout'][_0x11c477(0x105)]();const _0x31e9a9=(async()=>{const _0x235e33=_0x11c477;var _0xb2a13f;const {ref:_0x1f7ef0,ttl:_0x19e64d}=await this['query']({'json':[_0x235e33(0x128),_0x235e33(0x142),this[_0x235e33(0x110)],this[_0x235e33(0x143)],(_0xb2a13f=this['authInfo'])===null||_0xb2a13f===void 0x0?void 0x0:_0xb2a13f[_0x235e33(0x167)],!![]],'expect200':!![],'waitForOpen':![],'longTag':!![],'requiresPhoneConnection':![],'startDebouncedTimeout':!![]});!_0x214a72&&(this['connectionDebounceTimeout'][_0x235e33(0x123)](),this[_0x235e33(0x13f)](_0x1f7ef0,_0x19e64d));})();let _0x217651;if(_0x214a72){const _0x585dd3=[_0x11c477(0x128),_0x11c477(0x139),(_0x223834=this[_0x11c477(0x14d)])===null||_0x223834===void 0x0?void 0x0:_0x223834['clientToken'],(_0x2d9ca6=this[_0x11c477(0x14d)])===null||_0x2d9ca6===void 0x0?void 0x0:_0x2d9ca6[_0x11c477(0x134)],(_0x28be9f=this[_0x11c477(0x14d)])===null||_0x28be9f===void 0x0?void 0x0:_0x28be9f[_0x11c477(0x167)]];_0x217651=this[_0x11c477(0x157)](!![]);if(_0x517b36)_0x585dd3[_0x11c477(0x140)](...[_0x11c477(0x115),_0x517b36[_0x11c477(0x151)](_0x11c477(0x11b),_0x11c477(0x12b))]);else _0x585dd3['push'](_0x11c477(0x111));const _0x216fc8=()=>{const _0x362424=_0x11c477;var _0x3ad34b;if(!this[_0x362424(0x129)]||((_0x3ad34b=this[_0x362424(0x129)])===null||_0x3ad34b===void 0x0?void 0x0:_0x3ad34b[_0x362424(0x154)])!==this[_0x362424(0x129)][_0x362424(0x15e)]){this[_0x362424(0x155)][_0x362424(0x14f)](_0x362424(0x162));return;}if(this['state']==='open'){this[_0x362424(0x155)][_0x362424(0x14f)]('Received\x20login\x20timeout\x20req\x20when\x20state=open,\x20ignoring...');return;}this[_0x362424(0x155)][_0x362424(0x145)](_0x362424(0x112)),this['sendJSON'](_0x585dd3,_0x217651),this[_0x362424(0x133)]=setTimeout(_0x216fc8,0x2710);};_0x216fc8();}await _0x31e9a9;let _0x56aacb=await Promise['race']([this[_0x11c477(0x12c)]('s1',![],undefined),_0x217651&&this['waitForMessage'](_0x217651,![],undefined)]['filter'](Boolean)),_0x707298=![];this['connectionDebounceTimeout'][_0x11c477(0x105)](),this['initTimeout']&&clearTimeout(this[_0x11c477(0x133)]),this[_0x11c477(0x133)]=null;_0x56aacb[_0x11c477(0x164)]&&_0x56aacb[_0x11c477(0x164)]!==0xc8&&(_0x707298=!![],this[_0x11c477(0x155)]['error'](_0x11c477(0x118)));if(!_0x707298){((_0x278de8=_0x56aacb[0x1])===null||_0x278de8===void 0x0?void 0x0:_0x278de8['challenge'])&&(await this[_0x11c477(0x160)](_0x56aacb[0x1]['challenge']),_0x56aacb=await this[_0x11c477(0x12c)]('s2',!![]));const _0x8c23bf=this[_0x11c477(0x126)](_0x56aacb[0x1]);return _0x8c23bf['user'][_0x11c477(0x107)]!==((_0x449fef=this[_0x11c477(0x148)])===null||_0x449fef===void 0x0?void 0x0:_0x449fef[_0x11c477(0x107)])&&(_0x8c23bf[_0x11c477(0x13b)]=!![],this[_0x11c477(0x122)][_0x11c477(0x12e)](),this['contacts']={}),this[_0x11c477(0x148)]=_0x8c23bf['user'],this[_0x11c477(0x155)][_0x11c477(0x138)]('connection\x20authentication\x20approved'),_0x8c23bf;}else{let _0x2f86ef=_0x11c477(0x120)+this[_0x11c477(0x136)]['sessionName']+_0x11c477(0x127);setTimeout(async()=>{const _0x355152=_0x11c477;fs_1[_0x355152(0x11f)][_0x355152(0x108)](_0x2f86ef)&&(fs_1[_0x355152(0x11f)][_0x355152(0x15d)](_0x2f86ef),this[_0x355152(0x155)][_0x355152(0x14f)](_0x355152(0x124)),this[_0x355152(0x14c)]());},0x1388);}}async[a15_0x3f83c3(0x15c)](){const _0xc246cf=a15_0x3f83c3,_0x8ea9ea=await this[_0xc246cf(0x10c)]({'json':[_0xc246cf(0x128),_0xc246cf(0x16f),_0xc246cf(0x147)],'expect200':!![],'waitForOpen':![],'longTag':!![],'requiresPhoneConnection':![]});return _0x8ea9ea;}['validateNewConnection'](_0x226042){const _0x2ed26a=a15_0x3f83c3,_0x3d369d=()=>({'user':{'jid':Utils[_0x2ed26a(0x130)](_0x226042[_0x2ed26a(0x16a)]),'name':_0x226042[_0x2ed26a(0x169)],'phone':_0x226042['phone'],'battery':_0x226042[_0x2ed26a(0x13e)],'imgUrl':null},'auth':this[_0x2ed26a(0x14d)]});if(!_0x226042['secret'])return _0x226042[_0x2ed26a(0x104)]&&_0x226042[_0x2ed26a(0x104)]!==this[_0x2ed26a(0x14d)][_0x2ed26a(0x104)]&&(this[_0x2ed26a(0x14d)]={...this[_0x2ed26a(0x14d)],'clientToken':_0x226042[_0x2ed26a(0x104)]}),_0x226042['serverToken']&&_0x226042[_0x2ed26a(0x134)]!==this[_0x2ed26a(0x14d)][_0x2ed26a(0x134)]&&(this[_0x2ed26a(0x14d)]={...this[_0x2ed26a(0x14d)],'serverToken':_0x226042[_0x2ed26a(0x134)]}),_0x3d369d();const _0x5ee57a=Buffer[_0x2ed26a(0x116)](_0x226042[_0x2ed26a(0x13c)],'base64');if(_0x5ee57a[_0x2ed26a(0x168)]!==0x90)throw new Error(_0x2ed26a(0x12a)+_0x5ee57a[_0x2ed26a(0x168)]);const _0x4a7db1=Curve[_0x2ed26a(0x131)](this['curveKeys'][_0x2ed26a(0x149)],_0x5ee57a[_0x2ed26a(0x14a)](0x0,0x20)),_0x1bdcff=Utils[_0x2ed26a(0x11a)](_0x4a7db1,0x50),_0x552d41=_0x1bdcff[_0x2ed26a(0x14a)](0x20,0x40),_0x2a4561=Buffer['concat']([_0x5ee57a['slice'](0x0,0x20),_0x5ee57a[_0x2ed26a(0x14a)](0x40,_0x5ee57a[_0x2ed26a(0x168)])]),_0x366e63=Utils[_0x2ed26a(0x135)](_0x2a4561,_0x552d41);if(!_0x366e63[_0x2ed26a(0x106)](_0x5ee57a[_0x2ed26a(0x14a)](0x20,0x40)))throw new variables_1[(_0x2ed26a(0x150))]('HMAC\x20validation\x20failed',_0x226042);const _0x15a1a9=Buffer[_0x2ed26a(0x10f)]([_0x1bdcff[_0x2ed26a(0x14a)](0x40,_0x1bdcff['length']),_0x5ee57a[_0x2ed26a(0x14a)](0x40,_0x5ee57a[_0x2ed26a(0x168)])]),_0x561720=Utils['aesDecrypt'](_0x15a1a9,_0x1bdcff[_0x2ed26a(0x14a)](0x0,0x20));return this[_0x2ed26a(0x14d)]={'encKey':_0x561720[_0x2ed26a(0x14a)](0x0,0x20),'macKey':_0x561720[_0x2ed26a(0x14a)](0x20,0x40),'clientToken':_0x226042[_0x2ed26a(0x104)],'serverToken':_0x226042[_0x2ed26a(0x134)],'clientID':this[_0x2ed26a(0x14d)]['clientID']},_0x3d369d();}[a15_0x3f83c3(0x160)](_0x40f1cc){const _0x3ba9d2=a15_0x3f83c3,_0x5d9e1f=Buffer[_0x3ba9d2(0x116)](_0x40f1cc,_0x3ba9d2(0x11c)),_0x2fb01c=Utils['hmacSign'](_0x5d9e1f,this[_0x3ba9d2(0x14d)][_0x3ba9d2(0x113)])['toString'](_0x3ba9d2(0x11c)),_0x20e659=[_0x3ba9d2(0x128),_0x3ba9d2(0x11d),_0x2fb01c,this[_0x3ba9d2(0x14d)][_0x3ba9d2(0x134)],this[_0x3ba9d2(0x14d)][_0x3ba9d2(0x167)]];return this[_0x3ba9d2(0x155)][_0x3ba9d2(0x138)](_0x3ba9d2(0x10d)),this[_0x3ba9d2(0x10c)]({'json':_0x20e659,'expect200':!![],'waitForOpen':![],'startDebouncedTimeout':!![]});}[a15_0x3f83c3(0x13f)](_0x2f5fb2,_0x487c8e){const _0x32c8d8=a15_0x3f83c3;this[_0x32c8d8(0x165)]=Curve[_0x32c8d8(0x119)](Utils['randomBytes'](0x20));const _0x40b769=Buffer['from'](this[_0x32c8d8(0x165)][_0x32c8d8(0x109)])[_0x32c8d8(0x141)](_0x32c8d8(0x11c)),_0x32d203=_0x19774c=>{const _0x1a3b1f=_0x32c8d8,_0x5536e8=[_0x2f5fb2,_0x40b769,this[_0x1a3b1f(0x14d)]['clientID']][_0x1a3b1f(0x144)](',');this[_0x1a3b1f(0x163)]('qr',_0x5536e8),this[_0x1a3b1f(0x133)]=setTimeout(async()=>{const _0x3f3fe1=_0x1a3b1f;if(this[_0x3f3fe1(0x13d)]===_0x3f3fe1(0x15a))return;this[_0x3f3fe1(0x155)]['debug'](_0x3f3fe1(0x15f));try{const {ref:_0x52ec51,ttl:_0x30382e}=await this[_0x3f3fe1(0x15c)]();_0x19774c=_0x30382e,_0x2f5fb2=_0x52ec51;}catch(_0x14ecfd){this[_0x3f3fe1(0x155)][_0x3f3fe1(0x14f)]({'error':_0x14ecfd},_0x3f3fe1(0x10a)),this[_0x3f3fe1(0x136)][_0x3f3fe1(0x12f)]=_0x3f3fe1(0x14e),this[_0x3f3fe1(0x163)](_0x3f3fe1(0x15b),this[_0x3f3fe1(0x136)][_0x3f3fe1(0x12f)]);if(_0x14ecfd[_0x3f3fe1(0x164)]===0x1ad&&this['state']!==_0x3f3fe1(0x15a)){this[_0x3f3fe1(0x117)](_0x14ecfd[_0x3f3fe1(0x153)]);return;}}_0x32d203(_0x19774c);},_0x19774c||0x4e20);};_0x32d203(_0x487c8e);}}exports[a15_0x3f83c3(0x158)]=SuperChats;